<%= simple_form_for @character do |f| %>
  <%= csrf_meta_tags %>
    <div class="d-flex justify-content-center">
      <div class="row g-2 col-9">

        <div >
          <%= f.input :name %>
          <div class="d-flex justify-content-evenly my-3">
            <%= f.select :speciality, ["Barbarian", "Wizard", "Rogue", "Bard", "Cleric", "Fighter", "Sorcerer", "Druid", "Ranger", "Paladin"],
                          prompt: "Choose a class" %>
            <%= f.select :level, (0..20), prompt: "Choose a level" %>
          </div>
          <%= f.input :background  %>
        </div>

        <div>
          <%= f.input :race %>
          <%= f.input :alignment %>
        </div>

        <div class="char-attr row">
          <div class="col-md-6">
            <%= f.input :strength %>
            <%= f.input :dexterity %>
            <%= f.input :constitution %>
          </div>
          <div class="col-md-6">
            <%= f.input :wisdom %>
            <%= f.input :intelligence %>
            <%= f.input :charisma %>
          </div>
        </div>
        <div data-controller="character-pic-dropdown">
          <button type="button" class="dropbtn" data-action="click->character-pic-dropdown#toggleDropdown">
            Select Character Picture
          </button>
          <div class="dropdown-content" data-character-pic-dropdown-target="dropdown">
            <% character_picture_images.each do |image| %>
              <img src="<%= asset_path(image) %>" alt="Profile Image" class="dropdown-item"
                   data-action="click->character-pic-dropdown#selectImage" data-image="<%= url_for(image) %>" />
            <% end %>
          </div>
          <%= f.hidden_field :portrait, id: "character-pic-input" %>
          <div class="selected-image-container">
            <img id="selected-image" src="<%= @character.portrait.attached? ? url_for(@character.portrait) : asset_path('default_character.jpeg') %>" alt="Selected Character Image" class="selected-image-placeholder" />
          </div>
        </div>
      </div>
    </div>

    <%= f.button :submit, @character.new_record? ? "Create Character" : "Update Character", class:"new-btn" %>

  <% end %>
